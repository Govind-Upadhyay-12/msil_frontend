import{a as L,b as U}from"./chunk-OZC4UA4Q.js";import{a as N,b as h,c as q,d as j,e as D,g as O,h as R,m as k,n as B,o as G}from"./chunk-AERWOUOB.js";import{C as m,Ca as T,D as c,Da as w,Fa as M,G as E,K as p,M as l,O as a,P as r,Q as u,S as b,T as v,V as d,ca as C,da as _,ea as y,n as g,s as x,t as S,ta as F,va as I,ya as A}from"./chunk-2I5E5T3I.js";function Q(e,i){e&1&&(a(0,"span",29),d(1,"Name is Required! "),r())}function X(e,i){if(e&1&&(a(0,"div"),p(1,Q,2,0,"span",28),r()),e&2){let s=v();m(),l("ngIf",s.addForm.get("name").errors.required&&s.isSubmitted)}}function Y(e,i){e&1&&(a(0,"span",29),d(1,"Email is Required! "),r())}function Z(e,i){if(e&1&&(a(0,"div"),p(1,Y,2,0,"span",28),r()),e&2){let s=v();m(),l("ngIf",s.addForm.get("email").errors.required&&s.isSubmitted)}}function ee(e,i){e&1&&(a(0,"span",29),d(1,"Mobile is Required! "),r())}function te(e,i){if(e&1&&(a(0,"div"),p(1,ee,2,0,"span",28),r()),e&2){let s=v();m(),l("ngIf",s.addForm.get("mobile").errors.required&&s.isSubmitted)}}function ie(e,i){e&1&&(a(0,"span",29),d(1,"Name is Required! "),r())}function re(e,i){if(e&1&&(a(0,"div"),p(1,ie,2,0,"span",28),r()),e&2){let s=v();m(),l("ngIf",s.editForm.get("name").errors.required&&s.isSubmitted1)}}function ne(e,i){e&1&&(a(0,"span",29),d(1,"Mobile is Required! "),r())}function oe(e,i){if(e&1&&(a(0,"div"),p(1,ne,2,0,"span",28),r()),e&2){let s=v();m(),l("ngIf",s.editForm.get("mobile").errors.required&&s.isSubmitted1)}}var W=(()=>{let i=class i{constructor(t,o,n,f,P,H,J,K){this.pipe=t,this.toastr=o,this.spinner=n,this.userService=f,this.router=P,this.renderer=H,this.fb=J,this.activatedRoute=K,this.dtOptions={},this.isSubmitted=!1,this.isSubmitted1=!1}ngOnInit(){this.getAdmins(),this.addForm=this.fb.group({name:["",[h.required]],email:["",h.required],mobile:["",h.required]}),this.editForm=this.fb.group({id:["",h.required],name:["",h.required],email:["",h.required],mobile:["",h.required]})}createAdmin(){console.log("re"),this.spinner.show(),this.addForm.value.userType="Admin",this.userService.createAdmin(this.addForm.value).subscribe(t=>{this.spinner.hide(),t.statusCode===200?($("#Modal01").modal("hide"),this.toastr.success(t.message,"Success"),this.router.navigateByUrl("/dashboard",{skipLocationChange:!0}).then(()=>this.router.navigate(["/admins"]))):this.toastr.error(t.message,"Error")},t=>{this.spinner.hide(),this.toastr.error(t.message,"Error")})}editAdmin(t){this.spinner.show(),this.userService.editAdmin({id:t}).subscribe(o=>{this.spinner.hide(),o.statusCode===200?o.data&&($("#Modal02").modal("show"),this.editForm.patchValue(o.data)):this.toastr.error(o.message,"Error")},o=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}updateAdmin(){this.spinner.show(),this.userService.updateAdmin(this.editForm.value).subscribe(t=>{this.spinner.hide(),t.statusCode===200?($("#Modal02").modal("hide"),this.toastr.success(t.message,"Success"),this.router.navigateByUrl("/dashboard",{skipLocationChange:!0}).then(()=>this.router.navigate(["/admins"]))):this.toastr.error(t.message,"Error")},t=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}deleteAdmin(t){confirm("Are you sure you want to delete this Admin ?")&&(this.spinner.show(),this.userService.deleteAdmin({id:t}).subscribe(o=>{this.spinner.hide(),o.statusCode===200?(this.toastr.success(o.message,"Success"),this.router.navigateByUrl("/dashboard",{skipLocationChange:!0}).then(()=>this.router.navigate(["/admins"]))):this.toastr.error(o.message,"Error")},o=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")}))}getAdmins(){this.dtOptions={pagingType:"full_numbers",pageLength:10,serverSide:!0,processing:!1,lengthMenu:[10,50,100,500,1e3],order:[3,"desc"],ajax:(t,o)=>{this.spinner.show(),t.userType="Admin",this.userService.getAdmins(t).subscribe(n=>{this.spinner.hide(),n.statusCode===200?o({recordsTotal:n.recordsTotal,recordsFiltered:n.recordsFiltered,data:n.admins}):(this.spinner.hide(),this.toastr.error(n.message,"Error"))},n=>{o({recordsTotal:0,recordsFiltered:[],data:[]}),this.spinner.hide(),this.toastr.error("Something Went Wrong!","Error")})},columns:[{title:"Name",data:"name",name:"name"},{title:"Email",data:"email",name:"email",orderable:!1},{title:"Mobile",data:"mobile",name:"mobile",orderable:!1},{title:"Created&nbsp;On",data:"createdAt",name:"createdAt",render:t=>this.pipe.transform(t,"short")},{title:"Action",data:"id",name:"id",orderable:!1,searchable:!1,render(t,o,n){return`
            <a href="javascript:void(0)">
            <i class="fa fa-edit" title="Edit" edit-id=`+t+`>
            </i>
            </a>
            |
            <a href="javascript:void(0)">
            <i class="fa fa-trash text-danger" title="Delete" delete-id=`+t+`>
            </i>
            </a>
            
           `}}],dom:"Bfrtip",buttons:["pageLength",{extend:"print",title:"Admins",exportOptions:{columns:[0,1,2,3,4,5,6,7]}},{extend:"excel",text:"Download",title:"Admins",exportOptions:{columns:[0,1,2,3,4,5,6,7]}}],responsive:!0}}ngAfterViewInit(){this.listener=this.renderer.listen("document","click",t=>{t.target.hasAttribute("edit-id")&&this.editAdmin(t.target.getAttribute("edit-id")),t.target.hasAttribute("delete-id")&&this.deleteAdmin(t.target.getAttribute("delete-id"))})}ngOnDestroy(){this.listener&&this.listener()}};i.\u0275fac=function(o){return new(o||i)(c(_),c(w),c(M),c(T),c(I),c(E),c(k),c(F))},i.\u0275cmp=x({type:i,selectors:[["app-admins"]],decls:65,vars:8,consts:[[1,"main-content"],[1,"page-content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0","font-size-18"],[2,"float","right"],["data-bs-toggle","modal","data-bs-target","#Modal01",1,"btn","btn-primary"],[1,"card"],[1,"card-body"],["id","usersTable","datatable","",1,"table","table-bordered","dataTable",2,"width","100%",3,"dtOptions"],["id","Modal01","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade","bs-example-modal-center"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["role","form",3,"ngSubmit","formGroup"],[1,"mb-3"],["type","text","name","name","formControlName","name","placeholder","Name",1,"form-control"],[4,"ngIf"],["type","text","name","email","formControlName","email","placeholder","Email",1,"form-control"],["type","text","name","mobile","formControlName","mobile","placeholder","Mobile",1,"form-control"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary",3,"click"],["id","Modal02","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade","bs-example-modal-center"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(o,n){o&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),d(7,"Admins Management"),r(),a(8,"span",7)(9,"button",8),d(10,"Add New"),r()()()()(),a(11,"div",3)(12,"div",4)(13,"div",9)(14,"div",10),u(15,"table",11),r()()()()()()(),a(16,"div",12)(17,"div",13)(18,"div",14)(19,"div",15)(20,"h5",16),d(21,"Add Admin"),r(),u(22,"button",17),r(),a(23,"div",18)(24,"form",19),b("ngSubmit",function(){return n.addForm.valid&&n.createAdmin()}),a(25,"div",20)(26,"label"),d(27,"Name"),r(),u(28,"input",21),p(29,X,2,1,"div",22),r(),a(30,"div",20)(31,"label"),d(32,"Email"),r(),u(33,"input",23),p(34,Z,2,1,"div",22),r(),a(35,"div",20)(36,"label"),d(37,"Mobile"),r(),u(38,"input",24),p(39,te,2,1,"div",22),r(),a(40,"div",25)(41,"button",26),b("click",function(){return n.isSubmitted=!0}),d(42,"Save"),r()()()()()()(),a(43,"div",27)(44,"div",13)(45,"div",14)(46,"div",15)(47,"h5",16),d(48,"Edit User"),r(),u(49,"button",17),r(),a(50,"div",18)(51,"form",19),b("ngSubmit",function(){return n.editForm.valid&&n.updateAdmin()}),a(52,"div",20)(53,"label"),d(54,"Name"),r(),u(55,"input",21),p(56,re,2,1,"div",22),r(),a(57,"div",20)(58,"label"),d(59,"Mobile"),r(),u(60,"input",24),p(61,oe,2,1,"div",22),r(),a(62,"div",25)(63,"button",26),b("click",function(){return n.isSubmitted1=!0}),d(64,"Save"),r()()()()()()()),o&2&&(m(15),l("dtOptions",n.dtOptions),m(9),l("formGroup",n.addForm),m(5),l("ngIf",n.addForm.get("name").errors&&n.isSubmitted),m(5),l("ngIf",n.addForm.get("email").errors&&n.isSubmitted),m(5),l("ngIf",n.addForm.get("mobile").errors&&n.isSubmitted),m(12),l("formGroup",n.editForm),m(5),l("ngIf",n.editForm.get("name").errors&&n.isSubmitted1),m(5),l("ngIf",n.editForm.get("mobile").errors&&n.isSubmitted1))},dependencies:[C,L,D,N,q,j,O,R]});let e=i;return e})();var ae=[{path:"",component:W}],z=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=S({type:i}),i.\u0275inj=g({imports:[A.forChild(ae),A]});let e=i;return e})();var ye=(()=>{let i=class i{};i.\u0275fac=function(o){return new(o||i)},i.\u0275mod=S({type:i}),i.\u0275inj=g({providers:[_],imports:[y,z,U,B,G]});let e=i;return e})();export{ye as AdminsModule};
