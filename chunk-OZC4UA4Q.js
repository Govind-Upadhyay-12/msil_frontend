import{D as p,G as I,I as T,ea as v,n as g,t as u,u as b,z as y}from"./chunk-2I5E5T3I.js";var C=(()=>{let n=class n{constructor(i,e,r){this.el=i,this.vcr=e,this.renderer=r,this.dtOptions={}}ngOnInit(){this.dtTrigger?this.dtTrigger.subscribe(i=>{this.displayTable(i)}):this.displayTable(null)}ngOnDestroy(){this.dtTrigger&&this.dtTrigger.unsubscribe(),this.dt&&this.dt.destroy(!0)}displayTable(i){i&&(this.dtOptions=i),this.dtInstance=new Promise((e,r)=>{Promise.resolve(this.dtOptions).then(t=>{if(Object.keys(t).length===0&&$("tbody tr",this.el.nativeElement).length===0){r("Both the table and dtOptions cannot be empty");return}t.columns&&t.columns.forEach(s=>{(s.id??"").trim()===""&&(s.id=this.getColumnUniqueId())}),setTimeout(()=>{let s={rowCallback:(c,d,l)=>{if(t.columns){let h=t.columns;this.applyNgPipeTransform(c,h),this.applyNgRefTemplate(c,h,d)}t.rowCallback&&t.rowCallback(c,d,l)}};s=Object.assign({},t,s),this.dt=$(this.el.nativeElement).DataTable(s),e(this.dt)})})})}applyNgPipeTransform(i,e){e.filter(t=>t.ngPipeInstance&&!t.ngTemplateRef).forEach(t=>{let o=t.ngPipeInstance,s=t.ngPipeArgs||[],c=e.filter(f=>f.visible!==!1).findIndex(f=>f.id===t.id),d=i.childNodes.item(c),l=$(d).text(),h=o.transform(l,...s);$(d).text(h)})}applyNgRefTemplate(i,e,r){e.filter(o=>o.ngTemplateRef&&!o.ngPipeInstance).forEach(o=>{let{ref:s,context:c}=o.ngTemplateRef,d=e.filter(m=>m.visible!==!1).findIndex(m=>m.id===o.id),l=i.childNodes.item(d);$(l).html("");let h=Object.assign({},c,c?.userData,{adtData:r}),f=this.vcr.createEmbeddedView(s,h);this.renderer.appendChild(l,f.rootNodes[0])})}getColumnUniqueId(){let i="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let r=0;r<6;r++){let t=Math.floor(Math.random()*e.length);i+=e.charAt(t)}return i.trim()}};n.\u0275fac=function(e){return new(e||n)(p(y),p(T),p(I))},n.\u0275dir=b({type:n,selectors:[["","datatable",""]],inputs:{dtOptions:"dtOptions",dtTrigger:"dtTrigger"}});let a=n;return a})();var E=(()=>{let n=class n{};n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=u({type:n}),n.\u0275inj=g({imports:[v]});let a=n;return a})();export{C as a,E as b};
