import{a as Z,b as ee}from"./chunk-OZC4UA4Q.js";import{a as q,b as x,c as L,d as k,e as B,f as U,g as W,h as z,i as H,j as J,k as K,m as Q,n as X,o as Y}from"./chunk-AERWOUOB.js";import{C as l,Ca as V,D as c,Da as D,Fa as P,G as F,K as p,M as m,O as o,P as i,Q as g,R as M,S as C,T as f,U as A,V as d,W as E,ba as w,ca as T,da as N,ea as R,n as v,s as O,t as S,ta as j,va as G,w as b,x as _,ya as I}from"./chunk-2I5E5T3I.js";function se(e,t){if(e&1&&(o(0,"option",31),d(1),i()),e&2){let a=t.$implicit;m("value",a.category),l(),E(a.category)}}function ae(e,t){e&1&&(o(0,"span",33),d(1," Required! "),i())}function de(e,t){if(e&1&&(o(0,"div"),p(1,ae,2,0,"span",32),i()),e&2){let a=f();l(),m("ngIf",a.addForm.get("category").errors.required&&a.isSubmitted)}}function le(e,t){if(e&1&&(o(0,"option",31),d(1),i()),e&2){let a=t.$implicit;m("value",a.module_name),l(),E(a.module_name)}}function me(e,t){e&1&&(o(0,"span",33),d(1," Required! "),i())}function pe(e,t){if(e&1&&(o(0,"div"),p(1,me,2,0,"span",32),i()),e&2){let a=f();l(),m("ngIf",a.addForm.get("module_name").errors.required&&a.isSubmitted)}}function ce(e,t){e&1&&(o(0,"span",33),d(1," Required! "),i())}function ue(e,t){if(e&1&&(o(0,"div"),p(1,ce,2,0,"span",32),i()),e&2){let a=f();l(),m("ngIf",a.addForm.get("REGION").errors.required&&a.isSubmitted)}}function ge(e,t){e&1&&(o(0,"span",33),d(1," Required! "),i())}function fe(e,t){if(e&1&&(o(0,"div"),p(1,ge,2,0,"span",32),i()),e&2){let a=f();l(),m("ngIf",a.addForm.get("MSPIN_NO").errors.required&&a.isSubmitted)}}var ie=(()=>{let t=class t{constructor(n,s,r,u,h,y,ne,oe){this.pipe=n,this.toastr=s,this.spinner=r,this.userService=u,this.router=h,this.renderer=y,this.fb=ne,this.activatedRoute=oe,this.dtOptions={},this.isSubmitted=!1,this.isSubmitted1=!1,this.categoryList=[],this.module=[]}ngOnInit(){this.getCourseAssigning(),this.getCategoryList(),this.addForm=this.fb.group({category:["",[x.required]],module_name:["",x.required],REGION:[""],MSPIN_NO:[""]})}assignCourse(){this.spinner.show(),this.userService.assignCourse(this.addForm.value).subscribe(n=>{this.spinner.hide(),n.statusCode===200?($("#Modal01").modal("hide"),this.toastr.success(n.message,"Success"),this.router.navigateByUrl("/dashboard",{skipLocationChange:!0}).then(()=>this.router.navigate(["/course-assigning"]))):this.toastr.error(n.message,"Error")},n=>{this.spinner.hide(),this.toastr.error(n.message,"Error")})}getCategoryList(){this.spinner.show(),this.userService.getCategoryList().subscribe(n=>{this.spinner.hide(),n.statusCode===200?this.categoryList=n.categories:this.toastr.error(n.message,"Error")},n=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}getModule(n){this.spinner.show(),this.userService.getModule({category:n}).subscribe(s=>{this.spinner.hide(),s.statusCode===200?this.module=s.category:this.toastr.error(s.message,"Error")},s=>{this.spinner.hide(),this.toastr.error("Something went wrong","Error")})}onOptionsSelected(n){this.getModule(n)}getCourseAssigning(){this.dtOptions={pagingType:"full_numbers",pageLength:10,serverSide:!0,processing:!1,lengthMenu:[10,50,100,500,1e3],order:[1,"desc"],ajax:(n,s)=>{this.spinner.show(),this.userService.getCourseAssigning(n).subscribe(r=>{this.spinner.hide(),r.statusCode===200?s({recordsTotal:r.recordsTotal,recordsFiltered:r.recordsFiltered,data:r.users}):(this.spinner.hide(),this.toastr.error(r.message,"Error"))},r=>{s({recordsTotal:0,recordsFiltered:[],data:[]}),this.spinner.hide(),this.toastr.error("Something Went Wrong!","Error")})},columns:[{title:"REGION",data:"REGION",name:"REGION",orderable:!1,searchable:!1},{title:"MSPIN NO",data:"MSPIN_NO",name:"MSPIN_NO",orderable:!1,searchable:!1},{title:"Action",data:"id",name:"id",orderable:!1,searchable:!1,render(n,s,r){return`
           
            <a href="javascript:void(0)">
            <i class="fa fa-trash text-danger" title="Delete" delete-id=`+n+`>
            </i>
            </a>
            
           `}}],dom:"Bfrtip",buttons:["pageLength",{extend:"print",title:"Admins",exportOptions:{columns:[0,1,2,3]}},{extend:"excel",text:"Download",title:"Courses",exportOptions:{columns:[0,1,2,3]}}],responsive:!0}}ngAfterViewInit(){}ngOnDestroy(){this.listener&&this.listener()}};t.\u0275fac=function(s){return new(s||t)(c(N),c(D),c(P),c(V),c(G),c(F),c(Q),c(j))},t.\u0275cmp=O({type:t,selectors:[["app-course-assigning"]],decls:55,vars:8,consts:[["mySelect",""],[1,"main-content"],[1,"page-content"],[1,"container-fluid"],[1,"row"],[1,"col-12"],[1,"page-title-box","d-sm-flex","align-items-center","justify-content-between"],[1,"mb-sm-0","font-size-18"],[2,"float","right"],["data-bs-toggle","modal","data-bs-target","#Modal01",1,"btn","btn-primary"],[1,"card"],[1,"card-body"],["id","usersTable","datatable","",1,"table","table-bordered","dataTable",2,"width","100%",3,"dtOptions"],["id","Modal01","tabindex","-1","role","dialog","aria-hidden","true",1,"modal","fade","bs-example-modal-center"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-bs-dismiss","modal","aria-label","Close",1,"btn-close"],[1,"modal-body"],["role","form",3,"ngSubmit","formGroup"],[1,"mb-3"],["formControlName","category",1,"form-control",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["formControlName","module_name",1,"form-control"],["type","text","name","REGION","formControlName","REGION","placeholder","REGION",1,"form-control"],["type","number","name","MSPIN_NO","formControlName","MSPIN_NO","placeholder","MSPIN_NO",1,"form-control"],[1,"modal-footer"],["type","submit",1,"btn","btn-primary",3,"click"],[3,"value"],["class","text-danger",4,"ngIf"],[1,"text-danger"]],template:function(s,r){if(s&1){let u=M();o(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4)(4,"div",5)(5,"div",6)(6,"h4",7),d(7,"Course Assigning"),i(),o(8,"span",8)(9,"button",9),d(10,"Add New"),i()()()()(),o(11,"div",4)(12,"div",5)(13,"div",10)(14,"div",11),g(15,"table",12),i()()()()()()(),o(16,"div",13)(17,"div",14)(18,"div",15)(19,"div",16)(20,"h5",17),d(21,"Assign Course"),i(),g(22,"button",18),i(),o(23,"div",19)(24,"form",20),C("ngSubmit",function(){return b(u),_(r.addForm.valid&&r.assignCourse())}),o(25,"div",21)(26,"label"),d(27,"Category"),i(),o(28,"select",22,0),C("change",function(){b(u);let y=A(29);return _(r.onOptionsSelected(y.value))}),o(30,"option",23),d(31,"Select"),i(),p(32,se,2,2,"option",24),i(),p(33,de,2,1,"div",25),i(),o(34,"div",21)(35,"label"),d(36,"Module Name"),i(),o(37,"select",26)(38,"option",23),d(39,"Select"),i(),p(40,le,2,2,"option",24),i(),p(41,pe,2,1,"div",25),i(),o(42,"div",21)(43,"label"),d(44,"REGION"),i(),g(45,"input",27),p(46,ue,2,1,"div",25),i(),o(47,"div",21)(48,"label"),d(49,"MSPIN_NO"),i(),g(50,"input",28),p(51,fe,2,1,"div",25),i(),o(52,"div",29)(53,"button",30),C("click",function(){return b(u),_(r.isSubmitted=!0)}),d(54,"Save"),i()()()()()()()}s&2&&(l(15),m("dtOptions",r.dtOptions),l(9),m("formGroup",r.addForm),l(8),m("ngForOf",r.categoryList),l(),m("ngIf",r.addForm.get("category").errors&&r.isSubmitted),l(7),m("ngForOf",r.module),l(),m("ngIf",r.addForm.get("module_name").errors&&r.isSubmitted),l(5),m("ngIf",r.addForm.get("REGION").errors&&r.isSubmitted),l(5),m("ngIf",r.addForm.get("MSPIN_NO").errors&&r.isSubmitted))},dependencies:[w,T,Z,B,J,K,q,U,H,L,k,W,z]});let e=t;return e})();var he=[{path:"",component:ie}],re=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=S({type:t}),t.\u0275inj=v({imports:[I.forChild(he),I]});let e=t;return e})();var Ge=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=S({type:t}),t.\u0275inj=v({providers:[N],imports:[R,re,ee,X,Y]});let e=t;return e})();export{Ge as CourseAssigningModule};
